"use strict";(self["webpackChunkadminlte"]=self["webpackChunkadminlte"]||[]).push([[170],{7805:function(s,t,e){e.d(t,{Z:function(){return b}});var a=e(6252);const i=s=>((0,a.dD)("data-v-1458f210"),s=s(),(0,a.Cn)(),s),n={class:"lds-spinner"},l=i((()=>(0,a._)("div",null,null,-1))),r=i((()=>(0,a._)("div",null,null,-1))),o=i((()=>(0,a._)("div",null,null,-1))),u=i((()=>(0,a._)("div",null,null,-1))),d=i((()=>(0,a._)("div",null,null,-1))),w=i((()=>(0,a._)("div",null,null,-1))),m=i((()=>(0,a._)("div",null,null,-1))),h=i((()=>(0,a._)("div",null,null,-1))),c=i((()=>(0,a._)("div",null,null,-1))),p=i((()=>(0,a._)("div",null,null,-1))),$=i((()=>(0,a._)("div",null,null,-1))),g=i((()=>(0,a._)("div",null,null,-1))),L=[l,r,o,u,d,w,m,h,c,p,$,g];function _(s,t,e,i,l,r){return(0,a.wg)(),(0,a.iD)("div",n,L)}var y={name:"Loader"},v=e(3744);const f=(0,v.Z)(y,[["render",_],["__scopeId","data-v-1458f210"]]);var b=f},5170:function(s,t,e){e.r(t),e.d(t,{default:function(){return hs}});var a=e(6252),i=e(9963);const n=s=>((0,a.dD)("data-v-2f56aba7"),s=s(),(0,a.Cn)(),s),l={class:"row"},r={class:"col"},o={class:"card"},u={class:"card-header"},d=n((()=>(0,a._)("h3",{class:"card-title"},"Страница новости",-1))),w={class:"custom-control custom-switch custom-switch-off-danger custom-switch-on-success"},m={class:"custom-control-label",for:"mainBannersSwitch"},h={key:0},c={key:1},p={class:"film_lang pr-4"},$={class:"custom-control custom-radio"},g=n((()=>(0,a._)("label",{for:"ua",class:"custom-control-label"},"UA",-1))),L={class:"custom-control custom-radio"},_=n((()=>(0,a._)("label",{for:"eng",class:"custom-control-label"},"ENG",-1))),y={class:"card-body"},v={class:"film_name"},f={class:"input-group mb-3"},b=n((()=>(0,a._)("p",null,"Название новости:",-1))),k=n((()=>(0,a._)("p",{class:"ml-4"},"Дата публикации:",-1))),D={class:"film_desc"},U={class:"input-group mb-3"},C=n((()=>(0,a._)("p",null,"Описание:",-1))),V={class:"film_banner mb-3"},x=n((()=>(0,a._)("p",null,"Главная картинка:",-1))),S={class:"film_image_body ml-2"},F={key:0,class:"film_image"},q=["src"],G={class:"banners_add"},R=n((()=>(0,a._)("i",{class:"fas fa-plus"},null,-1))),H=n((()=>(0,a._)("i",{class:"fas fa-minus"},null,-1))),K={class:"film_galery film_banner mb-3"},I=n((()=>(0,a._)("p",null,"Галерея картинок:",-1))),T={class:"film_image_body ml-2"},Z=["onClick"],j=["src"],J={class:"banners_add"},O=n((()=>(0,a._)("i",{class:"fas fa-plus"},null,-1))),B={class:"film_url"},E={class:"input-group mb-3"},W=n((()=>(0,a._)("p",null,"Ссылка на видео:",-1))),X={class:"film_seo"},Y=n((()=>(0,a._)("p",null,"SEO блок:",-1))),A={class:"input-group mb-3"},N=n((()=>(0,a._)("p",null,"URL:",-1))),P={class:"input-group mb-3"},z=n((()=>(0,a._)("p",null,"Title:",-1))),M={class:"input-group mb-3"},Q=n((()=>(0,a._)("p",null,"Keywords:",-1))),ss={class:"input-group mb-3"},ts=n((()=>(0,a._)("p",null,"Description:",-1))),es={class:"card-footer"};function as(s,t,e,n,as,is){const ns=(0,a.up)("content-header"),ls=(0,a.up)("loader"),rs=(0,a.up)("content");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ns,{title:"Страница новости"}),(0,a.Wm)(rs,null,{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",r,[(0,a._)("div",o,[(0,a._)("div",u,[d,(0,a._)("div",w,[(0,a.wy)((0,a._)("input",{type:"checkbox",class:"custom-control-input",id:"mainBannersSwitch","onUpdate:modelValue":t[0]||(t[0]=s=>this.$store.state.news.newsList[this.$route.params.id].toggle=s)},null,512),[[i.e8,this.$store.state.news.newsList[this.$route.params.id].toggle]]),(0,a._)("label",m,[this.$store.state.news.newsList[this.$route.params.id].toggle?((0,a.wg)(),(0,a.iD)("p",h,"ВКЛ")):((0,a.wg)(),(0,a.iD)("p",c,"ВЫКЛ"))])])]),(0,a._)("div",p,[(0,a._)("div",$,[(0,a.wy)((0,a._)("input",{class:"custom-control-input",type:"radio",id:"ua",value:"0",name:"lang","onUpdate:modelValue":t[1]||(t[1]=s=>this.$store.state.news.newsList[this.$route.params.id].lang=s)},null,512),[[i.G2,this.$store.state.news.newsList[this.$route.params.id].lang]]),g]),(0,a._)("div",L,[(0,a.wy)((0,a._)("input",{class:"custom-control-input",type:"radio",id:"eng",value:"1",name:"lang","onUpdate:modelValue":t[2]||(t[2]=s=>this.$store.state.news.newsList[this.$route.params.id].lang=s)},null,512),[[i.G2,this.$store.state.news.newsList[this.$route.params.id].lang]]),_])]),(0,a._)("div",y,[(0,a._)("div",v,[(0,a._)("div",f,[b,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"text",placeholder:"Название фильма","onUpdate:modelValue":t[3]||(t[3]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].title=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].title]]),k,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"date",name:"start","onUpdate:modelValue":t[4]||(t[4]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].publicDate=s),required:""},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].publicDate]])])]),(0,a._)("div",D,[(0,a._)("div",U,[C,(0,a.wy)((0,a._)("textarea",{class:"form-control ml-1",type:"text",placeholder:"Text","onUpdate:modelValue":t[5]||(t[5]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].desc=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].desc]])])]),(0,a._)("div",V,[x,(0,a._)("div",S,[this.$store.state.news.newsList[this.$route.params.id].images[this.$store.state.news.newsList[this.$route.params.id].lang].cover.url?((0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("img",{src:this.$store.state.news.newsList[this.$route.params.id].images[this.$store.state.news.newsList[this.$route.params.id].lang].cover.url},null,8,q)])):(0,a.kq)("",!0),(0,a._)("label",G,[(0,a._)("button",{class:"btn btn-primary square",onClick:t[6]||(t[6]=s=>this.$refs.coverSelect.click())},[R,(0,a.Uk)(" Добавить фото")]),(0,a._)("input",{class:"banner_input",ref:"coverSelect",type:"file",accept:"image/*",onChange:t[7]||(t[7]=s=>is.coverSelect(s))},null,544)]),(0,a._)("button",{class:"btn btn-primary square",onClick:t[8]||(t[8]=s=>this.$store.state.news.cnewsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].cover.url=this.$store.state.news.newsList[this.$route.params.id].images[this.$store.state.news.newsList[this.$route.params.id].lang].cover.url="")},[H,(0,a.Uk)(" Удалить фото")])])]),(0,a._)("div",K,[I,(0,a._)("div",T,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.$store.state.news.newsList[this.$route.params.id].images[this.$store.state.news.newsList[this.$route.params.id].lang].gallery,((s,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"film_image",key:t},[(0,a._)("span",{class:"badge bg-danger poa",onClick:s=>is.delGalleryImg(t)},"X",8,Z),(0,a._)("img",{src:s.url},null,8,j)])))),128)),(0,a._)("label",J,[(0,a._)("button",{class:"btn btn-primary square",onClick:t[9]||(t[9]=s=>this.$refs.newsSelect.click())},[O,(0,a.Uk)(" Добавить фото")]),(0,a._)("input",{class:"banner_input",ref:"newsSelect",type:"file",multiple:"multiple",accept:"image/*",onChange:t[10]||(t[10]=s=>is.newsSelect(s))},null,544)])])]),(0,a._)("div",B,[(0,a._)("div",E,[W,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"text",placeholder:"Ссылка на видео в youtube","onUpdate:modelValue":t[11]||(t[11]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].trailer=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].trailer]])])]),(0,a._)("div",X,[Y,(0,a._)("div",A,[N,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"text",placeholder:"URL","onUpdate:modelValue":t[12]||(t[12]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.url=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.url]])]),(0,a._)("div",P,[z,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"text",placeholder:"Title","onUpdate:modelValue":t[13]||(t[13]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.title=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.title]])]),(0,a._)("div",M,[Q,(0,a.wy)((0,a._)("input",{class:"form-control ml-1",type:"text",placeholder:"Keywords","onUpdate:modelValue":t[14]||(t[14]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.keywords=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.keywords]])]),(0,a._)("div",ss,[ts,(0,a.wy)((0,a._)("textarea",{class:"form-control ml-1",type:"text",placeholder:"Description","onUpdate:modelValue":t[15]||(t[15]=s=>this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.desc=s)},null,512),[[i.nr,this.$store.state.news.newsList[this.$route.params.id].data[this.$store.state.news.newsList[this.$route.params.id].lang].seo.desc]])])])]),(0,a._)("div",es,[(0,a._)("button",{class:"btn btn-primary float-right",onClick:t[16]||(t[16]=s=>is.uploadFilm(this.$route.params.id))},"Сохранить")]),this.$store.state.news.loader?((0,a.wg)(),(0,a.j4)(ls,{key:0})):(0,a.kq)("",!0)])])])])),_:1})],64)}e(7658);var is=e(2392),ns=e(6650),ls=e(3247),rs=e(7805),os=e(5705),us=e(760),ds={components:{Loader:rs.Z},setup(){return{v$:(0,os.Xw)()}},validations(){return{title:{required:us.C1}}},created(){},data(){return{file:null,files:null}},computed:{},watch:{},methods:{coverSelect(s){let t=this.$store.state.news.newsList[this.$route.params.id].lang,e=s.target.files[0];this.$store.state.news.newsList[this.$route.params.id].images[t].cover.image=e,this.$store.state.news.newsList[this.$route.params.id].images[t].cover.url=URL.createObjectURL(e),this.$store.state.news.newsList[this.$route.params.id].data[t].cover.name=this.$store.state.news.newsList[this.$route.params.id].images[t].cover.name=0===t?this.$store.state.news.newsList[this.$route.params.id].name+"-ua":this.$store.state.news.newsList[this.$route.params.id].name+"-eng"},async newsSelect(s){let t=this.$store.state.news.newsList[this.$route.params.id].lang,e=s.target.files;for(let a=0;a<e.length;a++)await new Promise((s=>setTimeout(s,1))),0===t?this.$store.state.news.newsList[this.$route.params.id].data[t].gallery.push({id:this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.length,name:"Gallery-"+Date.now()+"-ua",url:null}):this.$store.state.news.newsList[this.$route.params.id].data[t].gallery.push({id:this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.length,name:"Gallery-"+Date.now()+"-eng",url:null}),this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.push({id:this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.length,name:this.$store.state.news.newsList[this.$route.params.id].data[t].gallery[a].name,uploaded:!1,image:e[a],url:URL.createObjectURL(e[a])})},delGalleryImg(s){let t=this.$store.state.news.newsList[this.$route.params.id].lang;this.$store.state.news.newsList[this.$route.params.id].images[t].gallery[s].uploaded&&this.$store.state.news.newsList[this.$route.params.id].images[t].deleted.push(this.$store.state.news.newsList[this.$route.params.id].images[t].gallery[s].name),this.$store.state.news.newsList[this.$route.params.id].data[t].gallery.splice(s,1),this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.splice(s,1);for(let e=0;e<this.$store.state.news.newsList[this.$route.params.id].images[t].gallery.length;e++)this.$store.state.news.newsList[this.$route.params.id].images[t].gallery[e].id!==e&&(this.$store.state.news.newsList[this.$route.params.id].data[t].gallery[e].id=this.$store.state.news.newsList[this.$route.params.id].images[t].gallery[e].id=e)},async uploadFilm(s){this.$store.state.news.loader=!0,this.$store.state.news.newsList[s].uploaded=!1;for(let e=0;e<this.$store.state.news.newsList[s].images.length;e++){if(null!==this.$store.state.news.newsList[s].images[e].cover.image)try{const t=(0,ns.iH)(is.t,"news/cover/"+this.$store.state.news.newsList[s].images[e].cover.name);await(0,ns.KV)(t,this.$store.state.news.newsList[s].images[e].cover.image).then((async()=>{await(0,ns.Jt)(t).then((t=>{this.$store.state.news.newsList[s].data[e].cover.url=t,this.uploadFilmData(s)}))}))}catch(t){console.log(t)}else this.uploadFilmData(s);if(0!==this.$store.state.news.newsList[s].images[e].deleted.length)for(let t=0;t<this.$store.state.news.newsList[s].images[e].deleted.length;t++){const a=(0,ns.iH)(is.t,"news/gallery/"+this.$store.state.news.newsList[s].images[e].deleted[t]);await(0,ns.oq)(a).then((()=>{this.$store.state.news.newsList[s].images[e].deleted.splice(t,1)})).catch((s=>{console.log(s)}))}if(this.uploadFilmData(s),this.$store.state.news.newsList[s].images[e].gallery.length){for(let a=0;a<this.$store.state.news.newsList[s].images[e].gallery.length;a++)if(null!==this.$store.state.news.newsList[s].images[e].gallery[a].image)try{const t=(0,ns.iH)(is.t,"news/gallery/"+this.$store.state.news.newsList[s].images[e].gallery[a].name);await(0,ns.KV)(t,this.$store.state.news.newsList[s].images[e].gallery[a].image).then((async()=>{await(0,ns.Jt)(t).then((t=>{this.$store.state.news.newsList[s].data[e].gallery[a].url=t,this.uploadFilmData(s)}))}))}catch(t){console.log(t)}else this.uploadFilmData(s);this.uploadFilmData(s)}else this.uploadFilmData(s)}this.$store.state.news.newsList[s].uploaded=!0,this.$store.state.news.loader=!1,this.$router.push({name:"news"})},async uploadFilmData(s){const t={lang:this.$store.state.news.newsList[s].lang,toggle:this.$store.state.news.newsList[s].toggle,creationDate:this.$store.state.news.newsList[s].creationDate,data:this.$store.state.news.newsList[s].data};await(0,ls.pl)((0,ls.JU)(is.db,"news",this.$store.state.news.newsList[s].name),t).then((()=>{}))}}},ws=e(3744);const ms=(0,ws.Z)(ds,[["render",as],["__scopeId","data-v-2f56aba7"]]);var hs=ms}}]);
//# sourceMappingURL=170.81b40f9a.js.map