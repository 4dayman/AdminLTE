"use strict";(self["webpackChunkadminlte"]=self["webpackChunkadminlte"]||[]).push([[435],{1435:function(t,s,e){e.r(s),e.d(s,{default:function(){return G}});var i=e(6252);const a={class:"row"},l={class:"col"},r={class:"card"},n={class:"card-header"},c=(0,i._)("h3",{class:"card-title"},"Список фильмов текущих",-1),o=(0,i._)("i",{class:"fas fa-plus"},null,-1),d={class:"card-body"},m={class:"film-card-wrap"},u={class:"card"},f=(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title"},"Список фильмов которые покажут скоро")],-1),h={class:"card-body"},p={class:"film-card-wrap"};function g(t,s,e,g,v,$){const L=(0,i.up)("content-header"),_=(0,i.up)("FilmsList"),b=(0,i.up)("FilmsUpcomList"),w=(0,i.up)("content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(L,{title:"Фильмы",icon:"fas fa-info-circle"}),(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",l,[(0,i._)("div",r,[(0,i._)("div",n,[c,(0,i._)("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...t)=>$.addFilm&&$.addFilm(...t))},[o,(0,i.Uk)(" Добавить фильм")])]),(0,i._)("div",d,[(0,i._)("div",m,[(0,i.Wm)(_)])])]),(0,i._)("div",u,[f,(0,i._)("div",h,[(0,i._)("div",p,[(0,i.Wm)(b)])])])])])])),_:1})],64)}e(7658);var v=e(3577),$=e(9963);const L=t=>((0,i.dD)("data-v-abbccfea"),t=t(),(0,i.Cn)(),t),_={class:"card p-2"},b=["src"],w={key:0,class:"modal-wrap"},k={class:"card p-2 modal-body"},y=L((()=>(0,i._)("h3",null,"Действительно хотите удалить",-1))),F={class:"actions"},C=["onClick"];function D(t,s,e,a,l,r){const n=(0,i.up)("router-link");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.currentList,((t,e)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"banner",key:e},[(0,i._)("div",_,[r.currentList.length>1?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"badge bg-danger poa",onClick:s[0]||(s[0]=t=>this.$store.state.films.currentModal=!this.$store.state.films.currentModal)},"X")):(0,i.kq)("",!0),(0,i.Wm)(n,{to:`filmsOne/${t.id}`,class:"input-group"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:t.images[0].cover.url},null,8,b),(0,i._)("p",null,"Title:"+(0,v.zw)(t.data[0].title),1)])),_:2},1032,["to"])]),this.$store.state.films.currentModal?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",k,[y,(0,i._)("div",F,[(0,i._)("button",{class:"btn btn-primary float-right",onClick:s=>r.deleteFilm(t.id)},"Удалить",8,C),(0,i._)("button",{class:"btn btn-primary float-right",onClick:s[1]||(s[1]=t=>this.$store.state.films.currentModal=!this.$store.state.films.currentModal)},"Отменить")])])])):(0,i.kq)("",!0)])),[[$.F8,!t.data[0].toggle]]))),128)}var M=e(3247),W=e(2392),O={components:{},computed:{currentList(){return this.$store.state.films.currentList}},data(){return{}},methods:{async deleteFilm(t){if(this.$store.state.films.currentModal=!1,this.loading=!0,this.$store.state.films.currentList[t].uploaded){await(0,M.oe)((0,M.JU)(W.db,"films",this.$store.state.films.currentList[t].name));for(let s=0;s<this.$store.state.films.currentList[t].images.length;s++)if(null!==this.$store.state.films.currentList[t].images[s].cover.name){const s=ref(W.t,"films/cover/"+this.$store.state.films.currentList[t].name);await deleteObject(s).catch((t=>{console.log(t)}))}}this.$store.state.films.currentList.splice(t,1);for(let s=0;s<this.$store.state.films.currentList.length;s++)this.$store.state.films.currentList[s].id!==s&&(this.$store.state.films.currentList[s].id=s);this.loading=!1}}},U=e(3744);const q=(0,U.Z)(O,[["render",D],["__scopeId","data-v-abbccfea"]]);var H=q;const J=t=>((0,i.dD)("data-v-0926370c"),t=t(),(0,i.Cn)(),t),Y={class:"card p-2"},Z=["src"],j={key:0,class:"modal-wrap"},z={class:"card p-2 modal-body"},I=J((()=>(0,i._)("h3",null,"Действительно хотите удалить",-1))),K={class:"actions"},T=["onClick"];function X(t,s,e,a,l,r){const n=(0,i.up)("router-link");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.currentList,((t,e)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"banner",key:e},[(0,i._)("div",Y,[r.currentList.length>1?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"badge bg-danger poa",onClick:s[0]||(s[0]=t=>this.$store.state.films.upcomModal=!this.$store.state.films.upcomModal)},"X")):(0,i.kq)("",!0),(0,i.Wm)(n,{to:`filmsOne/${t.id}`,class:"input-group"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:t.images[0].cover.url},null,8,Z),(0,i._)("p",null,"Title:"+(0,v.zw)(t.data[0].title),1)])),_:2},1032,["to"])]),this.$store.state.films.upcomModal?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",z,[I,(0,i._)("div",K,[(0,i._)("button",{class:"btn btn-primary float-right",onClick:s=>r.deleteFilm(t.id)},"Удалить",8,T),(0,i._)("button",{class:"btn btn-primary float-right",onClick:s[1]||(s[1]=t=>this.$store.state.films.upcomModal=!this.$store.state.films.upcomModal)},"Отменить")])])])):(0,i.kq)("",!0)])),[[$.F8,t.data[0].toggle]]))),128)}var E={components:{},computed:{currentList(){return this.$store.state.films.currentList}},data(){return{}},methods:{async deleteFilm(t){if(this.$store.state.films.upcomModal=!1,this.loading=!0,this.$store.state.films.currentList[t].uploaded){await(0,M.oe)((0,M.JU)(W.db,"films",this.$store.state.films.currentList[t].name));for(let s=0;s<this.$store.state.films.currentList[t].images.length;s++)if(null!==this.$store.state.films.currentList[t].images[s].cover.name){const s=ref(W.t,"films/cover/"+this.$store.state.films.currentList[t].name);await deleteObject(s).catch((t=>{console.log(t)}))}}this.$store.state.films.currentList.splice(t,1);for(let s=0;s<this.$store.state.films.currentList.length;s++)this.$store.state.films.currentList[s].id!==s&&(this.$store.state.films.currentList[s].id=s);this.loading=!1}}};const P=(0,U.Z)(E,[["render",X],["__scopeId","data-v-0926370c"]]);var x=P,A={components:{FilmsList:H,FilmsUpcomList:x},created(){this.getFilms()},methods:{addFilm(){this.$store.state.films.currentList.push({id:this.$store.state.films.currentList.length,name:"film-"+Date.now(),uploaded:!1,data:[{title:"",desc:"",cover:{name:null,url:null},toggle:null}],images:[{cover:{name:null,image:null,url:null,uploaded:!1},gallery:[],deleted:[]}]}),this.$router.push({name:"filmsOne",params:{id:this.$store.state.films.currentList.length-1}})},async getFilms(){this.$store.state.films.currentList=[];const t=await(0,M.PL)((0,M.hJ)(W.db,"films"));t.forEach((t=>{this.$store.state.films.currentList.push({id:this.$store.state.films.currentList.length,name:t.id,uploaded:!0,data:t.data().data,images:[{cover:{name:t.data().data[0].cover.name,image:null,url:t.data().data[0].cover.url},gallery:[],deleted:[]}]})}))}}};const B=(0,U.Z)(A,[["render",g]]);var G=B}}]);
//# sourceMappingURL=435.23a6d066.js.map