"use strict";(self["webpackChunkadminlte"]=self["webpackChunkadminlte"]||[]).push([[343],{7805:function(t,s,e){e.d(s,{Z:function(){return L}});var l=e(6252);const a=t=>((0,l.dD)("data-v-1458f210"),t=t(),(0,l.Cn)(),t),r={class:"lds-spinner"},o=a((()=>(0,l._)("div",null,null,-1))),i=a((()=>(0,l._)("div",null,null,-1))),n=a((()=>(0,l._)("div",null,null,-1))),d=a((()=>(0,l._)("div",null,null,-1))),m=a((()=>(0,l._)("div",null,null,-1))),c=a((()=>(0,l._)("div",null,null,-1))),u=a((()=>(0,l._)("div",null,null,-1))),p=a((()=>(0,l._)("div",null,null,-1))),g=a((()=>(0,l._)("div",null,null,-1))),h=a((()=>(0,l._)("div",null,null,-1))),_=a((()=>(0,l._)("div",null,null,-1))),v=a((()=>(0,l._)("div",null,null,-1))),f=[o,i,n,d,m,c,u,p,g,h,_,v];function b(t,s,e,a,o,i){return(0,l.wg)(),(0,l.iD)("div",r,f)}var y={name:"Loader"},$=e(3744);const w=(0,$.Z)(y,[["render",b],["__scopeId","data-v-1458f210"]]);var L=w},8343:function(t,s,e){e.r(s),e.d(s,{default:function(){return M}});var l=e(6252);const a={class:"row"},r={class:"col"},o={class:"card"},i={class:"card-header"},n=(0,l._)("h3",{class:"card-title"},"Список Акций",-1),d=(0,l._)("i",{class:"fas fa-plus"},null,-1),m={class:"card-body"},c={class:"film-card-wrap"},u=(0,l._)("div",{class:"card-footer"}," Footer ",-1);function p(t,s,e,p,g,h){const _=(0,l.up)("content-header"),v=(0,l.up)("PromsList"),f=(0,l.up)("loader"),b=(0,l.up)("content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(_,{title:"Акции"}),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",r,[(0,l._)("div",o,[(0,l._)("div",i,[n,(0,l._)("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=(...t)=>h.addProms&&h.addProms(...t))},[d,(0,l.Uk)(" Создать акцию")])]),(0,l._)("div",m,[(0,l._)("div",c,[(0,l.Wm)(v),this.$store.state.proms.loader?((0,l.wg)(),(0,l.j4)(f,{key:0})):(0,l.kq)("",!0)])]),u])])])])),_:1})],64)}e(7658);var g=e(3247),h=e(2392),_=e(7805),v=e(3577);const f=t=>((0,l.dD)("data-v-4a3fa1c0"),t=t(),(0,l.Cn)(),t),b={class:"table table-bordered"},y=f((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"table__item"},"Название"),(0,l._)("th",{class:"table__item"},"Дата создания"),(0,l._)("th",{class:"table__item"},"Статус"),(0,l._)("th",{class:"table__item"}),(0,l._)("th",{class:"table__item"})])],-1))),$={class:"table__item"},w={class:"table__item"},L={class:"table__item"},k={key:0},D={key:1},C={class:"table__item"},P=f((()=>(0,l._)("i",{class:"fas fa-pencil-alt"},null,-1))),S={class:"table__item"},q=["onClick"],H={key:0,class:"modal-wrap"},I={class:"card p-2 modal-body"},O=f((()=>(0,l._)("h3",null,"Действительно хотите удалить",-1))),Z={class:"actions"},W=["onClick"],F=["onClick"];function T(t,s,e,a,r,o){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("table",b,[y,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.promsList,((t,s)=>((0,l.wg)(),(0,l.iD)("tr",{key:s},[(0,l._)("th",$,(0,v.zw)(t.data[0].title),1),(0,l._)("th",w,(0,v.zw)(t.creationDate),1),(0,l._)("th",L,[t.toggle?((0,l.wg)(),(0,l.iD)("p",k,"ВКЛ")):((0,l.wg)(),(0,l.iD)("p",D,"ВЫКЛ"))]),(0,l._)("th",C,[(0,l.Wm)(i,{to:`promOne/${t.id}`,class:"input-group"},{default:(0,l.w5)((()=>[P])),_:2},1032,["to"])]),(0,l._)("th",S,[(0,l._)("i",{class:"far fa-trash-alt pointer",onClick:s=>t.modal=!t.modal},null,8,q)]),t.modal?((0,l.wg)(),(0,l.iD)("div",H,[(0,l._)("div",I,[O,(0,l._)("div",Z,[(0,l._)("button",{class:"btn btn-primary float-right",onClick:s=>o.deleteFilm(t.id)},"Удалить",8,W),(0,l._)("button",{class:"btn btn-primary float-right",onClick:s=>t.modal=!t.modal},"Отменить",8,F)])])])):(0,l.kq)("",!0)])))),128))])])}var z=e(6650),E={components:{},computed:{promsList(){return this.$store.state.proms.promsList}},data(){return{}},methods:{async deleteFilm(t){if(this.$store.state.proms.promsModal=!1,this.$store.state.proms.loader=!0,this.$store.state.proms.promsList[t].uploaded){await(0,g.oe)((0,g.JU)(h.db,"proms",this.$store.state.proms.promsList[t].name));for(let s=0;s<this.$store.state.proms.promsList[t].images.length;s++){const e=(0,z.iH)(h.t,"proms/cover/"+this.$store.state.proms.promsList[t].name);if(await(0,z.oq)(e).catch((t=>{console.log(t)})),0!==this.$store.state.proms.promsList[t].images[s].gallery.length)for(let l=0;l<this.$store.state.proms.promsList[t].images[s].gallery.length;l++){const e=(0,z.iH)(h.t,"proms/gallery/"+this.$store.state.proms.promsList[t].images[s].gallery[l].name);await(0,z.oq)(e).catch((t=>{console.log(t)}))}if(0!==this.$store.state.proms.promsList[t].images[s].deleted.length)for(let l=0;l<this.$store.state.proms.promsList[t].images[s].deleted.length;l++){const e=(0,z.iH)(h.t,"proms/gallery/"+this.$store.state.proms.promsList[t].images[s].deleted[l].name);await(0,z.oq)(e).catch((t=>{console.log(t)}))}}}this.$store.state.proms.promsList.splice(t,1);for(let s=0;s<this.$store.state.proms.promsList.length;s++)this.$store.state.proms.promsList[s].id!==s&&(this.$store.state.proms.promsList[s].id=s);this.$store.state.proms.loader=!1}}},J=e(3744);const U=(0,J.Z)(E,[["render",T],["__scopeId","data-v-4a3fa1c0"]]);var Y=U,j={components:{Loader:_.Z,PromsList:Y},created(){this.getProms()},methods:{addProms(){this.$store.state.proms.promsList.push({id:this.$store.state.proms.promsList.length,name:"prom-"+Date.now(),creationDate:(new Date).toISOString().split("T")[0],uploaded:!1,modal:!1,lang:0,toggle:!0,data:[{title:"",publicDate:(new Date).toISOString().split("T")[0],desc:"",trailer:"",cover:{name:null,url:null},gallery:[],seo:{url:"",title:"",keywords:"",desc:""}},{title:"",publicDate:(new Date).toISOString().split("T")[0],desc:"",trailer:"",cover:{name:null,url:null},gallery:[],seo:{url:"",title:"",keywords:"",desc:""}}],images:[{cover:{name:null,image:null,url:null,uploaded:!1},gallery:[],deleted:[]},{cover:{name:null,image:null,url:null,uploaded:!1},gallery:[],deleted:[]}]}),this.$router.push({name:"promOne",params:{id:this.$store.state.proms.promsList.length-1}})},async getProms(){this.$store.state.proms.loader=!0,this.$store.state.proms.promsList=[];const t=await(0,g.PL)((0,g.hJ)(h.db,"proms"));t.forEach((t=>{this.$store.state.proms.promsList.push({id:this.$store.state.proms.promsList.length,name:t.id,uploaded:!0,lang:t.data().lang,data:t.data().data,creationDate:t.data().creationDate,toggle:t.data().toggle,images:[{cover:{name:t.data().data[0].cover.name,image:null,url:t.data().data[0].cover.url},gallery:[],deleted:[]},{cover:{name:t.data().data[1].cover.name,image:null,url:t.data().data[1].cover.url},gallery:[],deleted:[]}]})})),this.$store.state.proms.promsList.forEach((t=>{for(let s=0;s<t.data.length;s++)for(let e=0;e<t.data[s].gallery.length;e++)t.images[s].gallery.push({id:t.images[s].gallery.length,name:t.data[s].gallery[e].name,uploaded:!0,image:null,url:t.data[s].gallery[e].url})})),this.$store.state.proms.loader=!1}}};const K=(0,J.Z)(j,[["render",p]]);var M=K}}]);
//# sourceMappingURL=343.c3605613.js.map