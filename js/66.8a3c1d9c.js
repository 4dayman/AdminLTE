"use strict";(self["webpackChunkadminlte"]=self["webpackChunkadminlte"]||[]).push([[66],{7805:function(t,e,s){s.d(e,{Z:function(){return k}});var l=s(6252);const a=t=>((0,l.dD)("data-v-1458f210"),t=t(),(0,l.Cn)(),t),i={class:"lds-spinner"},r=a((()=>(0,l._)("div",null,null,-1))),n=a((()=>(0,l._)("div",null,null,-1))),o=a((()=>(0,l._)("div",null,null,-1))),d=a((()=>(0,l._)("div",null,null,-1))),c=a((()=>(0,l._)("div",null,null,-1))),u=a((()=>(0,l._)("div",null,null,-1))),m=a((()=>(0,l._)("div",null,null,-1))),g=a((()=>(0,l._)("div",null,null,-1))),f=a((()=>(0,l._)("div",null,null,-1))),h=a((()=>(0,l._)("div",null,null,-1))),v=a((()=>(0,l._)("div",null,null,-1))),p=a((()=>(0,l._)("div",null,null,-1))),_=[r,n,o,d,c,u,m,g,f,h,v,p];function L(t,e,s,a,r,n){return(0,l.wg)(),(0,l.iD)("div",i,_)}var $={name:"Loader"},y=s(3744);const w=(0,y.Z)($,[["render",L],["__scopeId","data-v-1458f210"]]);var k=w},7066:function(t,e,s){s.r(e),s.d(e,{default:function(){return tt}});var l=s(6252);const a={class:"row por"},i={class:"col"},r={class:"card"},n={class:"card-header"},o=(0,l._)("h3",{class:"card-title"},"Список фильмов текущих",-1),d=(0,l._)("i",{class:"fas fa-plus"},null,-1),c={class:"card-body"},u={class:"film-card-wrap"},m={class:"card"},g=(0,l._)("div",{class:"card-header"},[(0,l._)("h3",{class:"card-title"},"Список фильмов которые покажут скоро")],-1),f={class:"card-body"},h={class:"film-card-wrap"};function v(t,e,s,v,p,_){const L=(0,l.up)("content-header"),$=(0,l.up)("FilmsList"),y=(0,l.up)("loader"),w=(0,l.up)("FilmsUpcomList"),k=(0,l.up)("content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(L,{title:"Фильмы",icon:"fas fa-info-circle"}),(0,l.Wm)(k,{class:"por"},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",i,[(0,l._)("div",r,[(0,l._)("div",n,[o,(0,l._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>_.addFilm&&_.addFilm(...t))},[d,(0,l.Uk)(" Добавить фильм")])]),(0,l._)("div",c,[(0,l._)("div",u,[(0,l.Wm)($),this.$store.state.films.loader?((0,l.wg)(),(0,l.j4)(y,{key:0})):(0,l.kq)("",!0)])])]),(0,l._)("div",m,[g,(0,l._)("div",f,[(0,l._)("div",h,[(0,l.Wm)(w),this.$store.state.films.loader?((0,l.wg)(),(0,l.j4)(y,{key:0})):(0,l.kq)("",!0)])])])])])])),_:1})],64)}s(7658);var p=s(3577),_=s(9963);const L=t=>((0,l.dD)("data-v-1500b24d"),t=t(),(0,l.Cn)(),t),$={class:"card p-2"},y=["onClick"],w=["src"],k={key:0,class:"modal-wrap"},b={class:"card p-2 modal-body"},C=L((()=>(0,l._)("h3",null,"Действительно хотите удалить",-1))),F={class:"actions"},D=["onClick"],q=["onClick"];function H(t,e,s,a,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.currentList,((t,e)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{class:"banner",key:e},[(0,l._)("div",$,[r.currentList.length>1?((0,l.wg)(),(0,l.iD)("span",{key:0,class:"badge bg-danger poa",onClick:e=>t.modal=!t.modal},"X",8,y)):(0,l.kq)("",!0),(0,l.Wm)(n,{to:`filmsOne/${t.id}`,class:"input-group"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:t.images[t.lang].cover.url},null,8,w),(0,l._)("h5",null,(0,p.zw)(t.data[t.lang].title),1)])),_:2},1032,["to"])]),t.modal?((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",b,[C,(0,l._)("div",F,[(0,l._)("button",{class:"btn btn-primary float-right",onClick:e=>r.deleteFilm(t.id)},"Удалить",8,D),(0,l._)("button",{class:"btn btn-primary float-right",onClick:e=>t.modal=!t.modal},"Отменить",8,q)])])])):(0,l.kq)("",!0)])),[[_.F8,!t.toggle]]))),128)}var W=s(3247),Z=s(2392),U=s(6650),I={components:{},computed:{currentList(){return this.$store.state.films.currentList}},data(){return{}},methods:{async deleteFilm(t){if(this.$store.state.films.currentModal=!1,this.$store.state.films.loader=!0,this.$store.state.films.currentList[t].uploaded){await(0,W.oe)((0,W.JU)(Z.db,"films",this.$store.state.films.currentList[t].name));for(let e=0;e<this.$store.state.films.currentList[t].images.length;e++){const s=(0,U.iH)(Z.t,"films/cover/"+this.$store.state.films.currentList[t].name);if(await(0,U.oq)(s).catch((t=>{console.log(t)})),0!==this.$store.state.films.currentList[t].images[e].gallery.length)for(let l=0;l<this.$store.state.films.currentList[t].images[e].gallery.length;l++){const s=(0,U.iH)(Z.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].gallery[l].name);await(0,U.oq)(s).catch((t=>{console.log(t)}))}if(0!==this.$store.state.films.currentList[t].images[e].deleted.length)for(let l=0;l<this.$store.state.films.currentList[t].images[e].deleted.length;l++){const s=(0,U.iH)(Z.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].deleted[l].name);await(0,U.oq)(s).catch((t=>{console.log(t)}))}}}this.$store.state.films.currentList.splice(t,1);for(let e=0;e<this.$store.state.films.currentList.length;e++)this.$store.state.films.currentList[e].id!==e&&(this.$store.state.films.currentList[e].id=e);this.$store.state.films.loader=!1}}},J=s(3744);const O=(0,J.Z)(I,[["render",H],["__scopeId","data-v-1500b24d"]]);var Y=O;const j=t=>((0,l.dD)("data-v-1884b7ac"),t=t(),(0,l.Cn)(),t),z={class:"card p-2"},E=["onClick"],K=["src"],M={key:0,class:"modal-wrap"},X={class:"card p-2 modal-body"},P=j((()=>(0,l._)("h3",null,"Действительно хотите удалить",-1))),x={class:"actions"},A=["onClick"],B=["onClick"];function G(t,e,s,a,i,r){const n=(0,l.up)("router-link");return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.currentList,((t,e)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{class:"banner",key:e},[(0,l._)("div",z,[r.currentList.length>1?((0,l.wg)(),(0,l.iD)("span",{key:0,class:"badge bg-danger poa",onClick:e=>t.modal=!t.modal},"X",8,E)):(0,l.kq)("",!0),(0,l.Wm)(n,{to:`filmsOne/${t.id}`,class:"input-group"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:t.images[t.lang].cover.url},null,8,K),(0,l._)("h5",null,(0,p.zw)(t.data[t.lang].title),1)])),_:2},1032,["to"])]),t.modal?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",X,[P,(0,l._)("div",x,[(0,l._)("button",{class:"btn btn-primary float-right",onClick:e=>r.deleteFilm(t.id)},"Удалить",8,A),(0,l._)("button",{class:"btn btn-primary float-right",onClick:e=>t.modal=!t.modal},"Отменить",8,B)])])])):(0,l.kq)("",!0)])),[[_.F8,t.toggle]]))),128)}var N={components:{},computed:{currentList(){return this.$store.state.films.currentList}},data(){return{}},methods:{async deleteFilm(t){if(this.$store.state.films.currentModal=!1,this.$store.state.films.loader=!0,this.$store.state.films.currentList[t].uploaded){await(0,W.oe)((0,W.JU)(Z.db,"films",this.$store.state.films.currentList[t].name));for(let e=0;e<this.$store.state.films.currentList[t].images.length;e++){const s=(0,U.iH)(Z.t,"films/cover/"+this.$store.state.films.currentList[t].name);if(await(0,U.oq)(s).catch((t=>{console.log(t)})),0!==this.$store.state.films.currentList[t].images[e].gallery.length)for(let l=0;l<this.$store.state.films.currentList[t].images[e].gallery.length;l++){const s=(0,U.iH)(Z.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].gallery[l].name);await(0,U.oq)(s).catch((t=>{console.log(t)}))}if(0!==this.$store.state.films.currentList[t].images[e].deleted.length)for(let l=0;l<this.$store.state.films.currentList[t].images[e].deleted.length;l++){const s=(0,U.iH)(Z.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].deleted[l].name);await(0,U.oq)(s).catch((t=>{console.log(t)}))}}}this.$store.state.films.currentList.splice(t,1);for(let e=0;e<this.$store.state.films.currentList.length;e++)this.$store.state.films.currentList[e].id!==e&&(this.$store.state.films.currentList[e].id=e);this.$store.state.films.loader=!1}}};const Q=(0,J.Z)(N,[["render",G],["__scopeId","data-v-1884b7ac"]]);var R=Q,S=s(7805),T={components:{FilmsList:Y,FilmsUpcomList:R,Loader:S.Z},created(){this.getFilms()},methods:{addFilm(){this.$store.state.films.currentList.push({id:this.$store.state.films.currentList.length,name:"film-"+Date.now(),uploaded:!1,modal:!1,lang:0,toggle:null,data:[{title:"",desc:"",trailer:"",type:[],cover:{name:null,url:null},gallery:[],seo:{url:"",title:"",keywords:"",desc:""}},{title:"",desc:"",trailer:"",type:[],cover:{name:null,url:null},gallery:[],seo:{url:"",title:"",keywords:"",desc:""}}],images:[{cover:{name:null,image:null,url:null,uploaded:!1},gallery:[],deleted:[]},{cover:{name:null,image:null,url:null,uploaded:!1},gallery:[],deleted:[]}]}),this.$router.push({name:"filmsOne",params:{id:this.$store.state.films.currentList.length-1}})},async getFilms(){this.$store.state.films.loader=!0,this.$store.state.films.currentList=[];const t=await(0,W.PL)((0,W.hJ)(Z.db,"films"));t.forEach((t=>{this.$store.state.films.currentList.push({id:this.$store.state.films.currentList.length,name:t.id,uploaded:!0,lang:t.data().lang,data:t.data().data,toggle:t.data().toggle,images:[{cover:{name:t.data().data[0].cover.name,image:null,url:t.data().data[0].cover.url},gallery:[],deleted:[]},{cover:{name:t.data().data[1].cover.name,image:null,url:t.data().data[1].cover.url},gallery:[],deleted:[]}]})})),this.$store.state.films.currentList.forEach((t=>{for(let e=0;e<t.data.length;e++)for(let s=0;s<t.data[e].gallery.length;s++)t.images[e].gallery.push({id:s,name:t.data[e].gallery[s].name,uploaded:!0,image:null,url:t.data[e].gallery[s].url})})),this.$store.state.films.loader=!1}}};const V=(0,J.Z)(T,[["render",v]]);var tt=V}}]);
//# sourceMappingURL=66.8a3c1d9c.js.map