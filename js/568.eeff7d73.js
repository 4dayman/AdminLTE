"use strict";(self["webpackChunkadminlte"]=self["webpackChunkadminlte"]||[]).push([[568],{7805:function(t,s,e){e.d(s,{Z:function(){return w}});var i=e(6252);const a=t=>((0,i.dD)("data-v-1458f210"),t=t(),(0,i.Cn)(),t),r={class:"lds-spinner"},l=a((()=>(0,i._)("div",null,null,-1))),o=a((()=>(0,i._)("div",null,null,-1))),n=a((()=>(0,i._)("div",null,null,-1))),u=a((()=>(0,i._)("div",null,null,-1))),m=a((()=>(0,i._)("div",null,null,-1))),c=a((()=>(0,i._)("div",null,null,-1))),d=a((()=>(0,i._)("div",null,null,-1))),h=a((()=>(0,i._)("div",null,null,-1))),p=a((()=>(0,i._)("div",null,null,-1))),f=a((()=>(0,i._)("div",null,null,-1))),$=a((()=>(0,i._)("div",null,null,-1))),g=a((()=>(0,i._)("div",null,null,-1))),L=[l,o,n,u,m,c,d,h,p,f,$,g];function _(t,s,e,a,l,o){return(0,i.wg)(),(0,i.iD)("div",r,L)}var y={name:"Loader"},v=e(3744);const b=(0,v.Z)(y,[["render",_],["__scopeId","data-v-1458f210"]]);var w=b},7568:function(t,s,e){e.r(s),e.d(s,{default:function(){return gt}});var i=e(6252),a=e(9963);const r=t=>((0,i.dD)("data-v-325a9ac6"),t=t(),(0,i.Cn)(),t),l={class:"row"},o={class:"col"},n={class:"card"},u=r((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title"},"Страница фильма")],-1))),m={class:"film_lang pr-4"},c={class:"custom-control custom-radio"},d=r((()=>(0,i._)("label",{for:"ua",class:"custom-control-label"},"UA",-1))),h={class:"custom-control custom-radio"},p=r((()=>(0,i._)("label",{for:"eng",class:"custom-control-label"},"ENG",-1))),f={class:"card-body"},$={class:"film_name"},g={class:"input-group mb-3"},L=r((()=>(0,i._)("p",null,"Название фильма:",-1))),_={class:"film_desc"},y={class:"input-group mb-3"},v=r((()=>(0,i._)("p",null,"Описание:",-1))),b={class:"film_banner mb-3"},w=r((()=>(0,i._)("p",null,"Главная картинка:",-1))),k={class:"film_image_body ml-2"},U={key:0,class:"film_image"},D=["src"],x={class:"banners_add"},V=r((()=>(0,i._)("i",{class:"fas fa-plus"},null,-1))),C=r((()=>(0,i._)("i",{class:"fas fa-minus"},null,-1))),S={class:"film_galery film_banner mb-3"},F=r((()=>(0,i._)("p",null,"Галерея картинок:",-1))),q={class:"film_image_body ml-2"},G=["onClick"],R=["src"],H={class:"banners_add"},K=r((()=>(0,i._)("i",{class:"fas fa-plus"},null,-1))),T={class:"film_url"},I={class:"input-group mb-3"},J=r((()=>(0,i._)("p",null,"Ссылка на трейлер:",-1))),Z={class:"film_type"},j={class:"input-group mb-3"},B=r((()=>(0,i._)("p",null,"Тип кино:",-1))),O={class:"form-check ml-2"},A=r((()=>(0,i._)("label",{class:"form-check-label",for:"3d"},"3D",-1))),E={class:"form-check ml-2"},W=r((()=>(0,i._)("label",{class:"form-check-label",for:"2d"},"2D",-1))),X={class:"form-check ml-2"},Y=r((()=>(0,i._)("label",{class:"form-check-label",for:"imax"},"iMAX",-1))),M={class:"film_seo"},N=r((()=>(0,i._)("p",null,"SEO блок:",-1))),P={class:"input-group mb-3"},Q=r((()=>(0,i._)("p",null,"URL:",-1))),z={class:"input-group mb-3"},tt=r((()=>(0,i._)("p",null,"Title:",-1))),st={class:"input-group mb-3"},et=r((()=>(0,i._)("p",null,"Keywords:",-1))),it={class:"input-group mb-3"},at=r((()=>(0,i._)("p",null,"Description:",-1))),rt={class:"card-footer"},lt={class:"custom-control custom-switch custom-switch-lg"},ot={key:0,class:"custom-control-label",for:"mainBannersSwitch"},nt={key:1,class:"custom-control-label",for:"mainBannersSwitch"};function ut(t,s,e,r,ut,mt){const ct=(0,i.up)("content-header"),dt=(0,i.up)("loader"),ht=(0,i.up)("content");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(ct,{title:"Страница фильма",icon:"fas fa-info-circle"}),(0,i.Wm)(ht,null,{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("div",o,[(0,i._)("div",n,[u,(0,i._)("div",m,[(0,i._)("div",c,[(0,i.wy)((0,i._)("input",{class:"custom-control-input",type:"radio",id:"ua",value:"0",name:"lang","onUpdate:modelValue":s[0]||(s[0]=t=>this.$store.state.films.currentList[this.$route.params.id].lang=t)},null,512),[[a.G2,this.$store.state.films.currentList[this.$route.params.id].lang]]),d]),(0,i._)("div",h,[(0,i.wy)((0,i._)("input",{class:"custom-control-input",type:"radio",id:"eng",value:"1",name:"lang","onUpdate:modelValue":s[1]||(s[1]=t=>this.$store.state.films.currentList[this.$route.params.id].lang=t)},null,512),[[a.G2,this.$store.state.films.currentList[this.$route.params.id].lang]]),p])]),(0,i._)("div",f,[(0,i._)("div",$,[(0,i._)("div",g,[L,(0,i.wy)((0,i._)("input",{class:"form-control ml-1",type:"text",placeholder:"Название фильма","onUpdate:modelValue":s[2]||(s[2]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].title=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].title]])])]),(0,i._)("div",_,[(0,i._)("div",y,[v,(0,i.wy)((0,i._)("textarea",{class:"form-control ml-1",type:"text",placeholder:"Text","onUpdate:modelValue":s[3]||(s[3]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].desc=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].desc]])])]),(0,i._)("div",b,[w,(0,i._)("div",k,[this.$store.state.films.currentList[this.$route.params.id].images[this.$store.state.films.currentList[this.$route.params.id].lang].cover.url?((0,i.wg)(),(0,i.iD)("div",U,[(0,i._)("img",{src:this.$store.state.films.currentList[this.$route.params.id].images[this.$store.state.films.currentList[this.$route.params.id].lang].cover.url},null,8,D)])):(0,i.kq)("",!0),(0,i._)("label",x,[(0,i._)("button",{class:"btn btn-primary square",onClick:s[4]||(s[4]=t=>this.$refs.coverSelect.click())},[V,(0,i.Uk)(" Добавить фото")]),(0,i._)("input",{class:"banner_input",ref:"coverSelect",type:"file",accept:"image/*",onChange:s[5]||(s[5]=t=>mt.coverSelect(t))},null,544)]),(0,i._)("button",{class:"btn btn-primary square",onClick:s[6]||(s[6]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].cover.url=this.$store.state.films.currentList[this.$route.params.id].images[this.$store.state.films.currentList[this.$route.params.id].lang].cover.url="")},[C,(0,i.Uk)(" Удалить фото")])])]),(0,i._)("div",S,[F,(0,i._)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.$store.state.films.currentList[this.$route.params.id].images[this.$store.state.films.currentList[this.$route.params.id].lang].gallery,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"film_image",key:t.id},[(0,i._)("span",{class:"badge bg-danger poa",onClick:s=>mt.delGalleryImg(t.id)},"X",8,G),(0,i._)("img",{src:t.url},null,8,R)])))),128)),(0,i._)("label",H,[(0,i._)("button",{class:"btn btn-primary square",onClick:s[7]||(s[7]=t=>this.$refs.filmsSelect.click())},[K,(0,i.Uk)(" Добавить фото")]),(0,i._)("input",{class:"banner_input",ref:"filmsSelect",type:"file",multiple:"multiple",accept:"image/*",onChange:s[8]||(s[8]=t=>mt.filmsSelect(t))},null,544)])])]),(0,i._)("div",T,[(0,i._)("div",I,[J,(0,i.wy)((0,i._)("input",{class:"form-control ml-1",type:"text",placeholder:"Ссылка на видео в youtube","onUpdate:modelValue":s[9]||(s[9]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].trailer=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].trailer]])])]),(0,i._)("div",Z,[(0,i._)("div",j,[B,(0,i._)("div",O,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox",id:"3d",value:"3d","onUpdate:modelValue":s[10]||(s[10]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type=t)},null,512),[[a.e8,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type]]),A]),(0,i._)("div",E,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox",id:"2d",value:"2d","onUpdate:modelValue":s[11]||(s[11]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type=t)},null,512),[[a.e8,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type]]),W]),(0,i._)("div",X,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"checkbox",id:"imax",value:"imax","onUpdate:modelValue":s[12]||(s[12]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type=t)},null,512),[[a.e8,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].type]]),Y])])]),(0,i._)("div",M,[N,(0,i._)("div",P,[Q,(0,i.wy)((0,i._)("input",{class:"form-control ml-1",type:"text",placeholder:"URL","onUpdate:modelValue":s[13]||(s[13]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.url=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.url]])]),(0,i._)("div",z,[tt,(0,i.wy)((0,i._)("input",{class:"form-control ml-1",type:"text",placeholder:"Title","onUpdate:modelValue":s[14]||(s[14]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.title=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.title]])]),(0,i._)("div",st,[et,(0,i.wy)((0,i._)("input",{class:"form-control ml-1",type:"text",placeholder:"Keywords","onUpdate:modelValue":s[15]||(s[15]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.keywords=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.keywords]])]),(0,i._)("div",it,[at,(0,i.wy)((0,i._)("textarea",{class:"form-control ml-1",type:"text",placeholder:"Description","onUpdate:modelValue":s[16]||(s[16]=t=>this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.desc=t)},null,512),[[a.nr,this.$store.state.films.currentList[this.$route.params.id].data[this.$store.state.films.currentList[this.$route.params.id].lang].seo.desc]])])])]),(0,i._)("div",rt,[(0,i._)("div",lt,[(0,i.wy)((0,i._)("input",{type:"checkbox",class:"custom-control-input",id:"mainBannersSwitch","onUpdate:modelValue":s[17]||(s[17]=t=>this.$store.state.films.currentList[this.$route.params.id].toggle=t)},null,512),[[a.e8,this.$store.state.films.currentList[this.$route.params.id].toggle]]),this.$store.state.films.currentList[this.$route.params.id].toggle?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("label",ot," now ")),this.$store.state.films.currentList[this.$route.params.id].toggle?((0,i.wg)(),(0,i.iD)("label",nt," upcom ")):(0,i.kq)("",!0)]),(0,i._)("button",{class:"btn btn-primary float-right",onClick:s[18]||(s[18]=t=>mt.uploadFilm(this.$route.params.id))},"Сохранить"),(0,i._)("button",{class:"btn btn-primary float-right",onClick:s[19]||(s[19]=t=>mt.resetFilm(this.$route.params.id))},"Вернуть базовую версию")]),this.$store.state.films.loader?((0,i.wg)(),(0,i.j4)(dt,{key:0})):(0,i.kq)("",!0)])])])])),_:1})],64)}e(7658);var mt=e(2392),ct=e(6650),dt=e(3247),ht=e(7805),pt={components:{Loader:ht.Z},created(){this.$route.params.id=this.$route.params.id},data(){return{file:null,files:null}},watch:{},methods:{coverSelect(t){let s=this.$store.state.films.currentList[this.$route.params.id].lang,e=t.target.files[0];this.$store.state.films.currentList[this.$route.params.id].images[s].cover.image=e,this.$store.state.films.currentList[this.$route.params.id].images[s].cover.url=URL.createObjectURL(e),this.$store.state.films.currentList[this.$route.params.id].data[s].cover.name=this.$store.state.films.currentList[this.$route.params.id].images[s].cover.name=0===s?this.$store.state.films.currentList[this.$route.params.id].name+"ua":this.$store.state.films.currentList[this.$route.params.id].name+"eng"},async filmsSelect(t){let s=this.$store.state.films.currentList[this.$route.params.id].lang,e=t.target.files;for(let i=0;i<e.length;i++)await new Promise((t=>setTimeout(t,1))),this.$store.state.films.currentList[this.$route.params.id].data[s].gallery.push({id:i,name:"Gallery-"+Date.now(),url:null}),this.$store.state.films.currentList[this.$route.params.id].images[s].gallery.push({id:i,name:this.$store.state.films.currentList[this.$route.params.id].data[s].gallery[i].name,uploaded:!1,image:e[i],url:URL.createObjectURL(e[i])})},delGalleryImg(t){let s=this.$store.state.films.currentList[this.$route.params.id].lang;this.$store.state.films.currentList[this.$route.params.id].images[s].gallery[t].uploaded&&this.$store.state.films.currentList[this.$route.params.id].images[s].deleted.push(this.$store.state.films.currentList[this.$route.params.id].data[s].gallery[t].name),this.$store.state.films.currentList[this.$route.params.id].data[s].gallery.splice(t,1),this.$store.state.films.currentList[this.$route.params.id].images[s].gallery.splice(t,1);for(let e=0;e<this.$store.state.films.currentList[this.$route.params.id].images[s].gallery.length;e++)this.$store.state.films.currentList[this.$route.params.id].images[s].gallery[e].id!==t&&(this.$store.state.films.currentList[this.$route.params.id].data[s].gallery[e].id=this.$store.state.films.currentList[id].images[s].gallery[e].id=e)},async uploadFilm(t){this.$store.state.films.loader=!0,this.$store.state.films.uploaded=!1;for(let e=0;e<this.$store.state.films.currentList[t].images.length;e++){if(null!==this.$store.state.films.currentList[t].images[e].cover.image)try{const s=(0,ct.iH)(mt.t,"films/cover/"+this.$store.state.films.currentList[t].images[e].cover.name);await(0,ct.KV)(s,this.$store.state.films.currentList[t].images[e].cover.image).then((async()=>{await(0,ct.Jt)(s).then((s=>{this.$store.state.films.currentList[t].data[e].cover.url=s,this.uploadFilmData(t)}))}))}catch(s){console.log(s)}else this.uploadFilmData(t);if(0!==this.$store.state.films.currentList[t].images[e].deleted.length){for(let s=0;s<this.$store.state.films.currentList[t].images[e].deleted.length;s++){const i=(0,ct.iH)(mt.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].deleted[s].name);await(0,ct.oq)(i).then((()=>{this.$store.state.films.currentList[t].images[e].deleted.splice(s,1)})).catch((t=>{console.log(t)}))}this.uploadFilmData(t)}if(this.$store.state.films.currentList[t].images[e].gallery.length)for(let i=0;i<this.$store.state.films.currentList[t].images[e].gallery.length;i++)if(null!==this.$store.state.films.currentList[t].images[e].gallery[i].image)try{const s=(0,ct.iH)(mt.t,"films/gallery/"+this.$store.state.films.currentList[t].images[e].gallery[i].name);await(0,ct.KV)(s,this.$store.state.films.currentList[t].images[e].gallery[i].image).then((async()=>{await(0,ct.Jt)(s).then((s=>{this.$store.state.films.currentList[t].data[e].gallery[i].url=s,this.uploadFilmData(t)}))}))}catch(s){console.log(s)}else this.uploadFilmData(t);else this.uploadFilmData(t)}this.$store.state.films.loader=!1,this.$router.push({name:"films"})},async uploadFilmData(t){const s={lang:this.$store.state.films.currentList[t].lang,toggle:this.$store.state.films.currentList[t].toggle,data:this.$store.state.films.currentList[t].data};await(0,dt.pl)((0,dt.JU)(mt.db,"films",this.$store.state.films.currentList[t].name),s).then((()=>{this.$store.state.films.currentList[t].uploaded=!0}))},async resetFilm(t){if(this.$store.state.films.loader=!0,this.$store.state.films.currentList[t].uploaded){for(let i=0;i<this.$store.state.films.currentList[t].images.length;i++)this.$store.state.films.currentList[t].images[i].cover.name=null,this.$store.state.films.currentList[t].images[i].cover.image=null,this.$store.state.films.currentList[t].images[i].cover.url=null,this.$store.state.films.currentList[t].images[i].gallery=[],this.$store.state.films.currentList[t].images[i].deleted=[];const s=(0,dt.JU)(mt.db,"films",this.$store.state.films.currentList[t].name),e=await(0,dt.QT)(s);if(e.exists()){this.$store.state.films.currentList[t].data=e.data().data;for(let s=0;s<this.$store.state.films.currentList[t].data.length;s++){this.$store.state.films.currentList[t].images[s].cover.name=this.$store.state.films.currentList[t].data[s].cover.name,this.$store.state.films.currentList[t].images[s].cover.url=this.$store.state.films.currentList[t].data[s].cover.url;for(let e=0;e<this.$store.state.films.currentList[t].data[s].gallery.length;e++)this.$store.state.films.currentList[t].images[s].gallery.push({id:e,name:this.$store.state.films.currentList[t].data[s].gallery[e].name,uploaded:!0,image:null,url:this.$store.state.films.currentList[t].data[s].gallery[e].url})}}}this.$store.state.films.loader=!1}}},ft=e(3744);const $t=(0,ft.Z)(pt,[["render",ut],["__scopeId","data-v-325a9ac6"]]);var gt=$t}}]);
//# sourceMappingURL=568.eeff7d73.js.map