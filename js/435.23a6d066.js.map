{"version":3,"file":"js/435.23a6d066.js","mappings":"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","sources":["webpack://adminlte/./src/views/FilmsView.vue","webpack://adminlte/./src/components/FilmsList.vue","webpack://adminlte/./src/components/FilmsList.vue?9800","webpack://adminlte/./src/components/FilmsUpcomList.vue","webpack://adminlte/./src/components/FilmsUpcomList.vue?eee2","webpack://adminlte/./src/views/FilmsView.vue?f9bc"],"sourcesContent":["<template>\r\n    <content-header title=\"Фильмы\" icon=\"fas fa-info-circle\" />\r\n    <content>\r\n        <div class=\"row\">\r\n            <div class=\"col\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h3 class=\"card-title\">Список фильмов текущих</h3>\r\n                        <button class=\"btn btn-primary\" @click=\"addFilm\"><i class=\"fas fa-plus\"></i>\r\n                            Добавить фильм</button>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"film-card-wrap\">\r\n                            <FilmsList />\r\n                            <!-- <button class=\"btn btn-primary square\" @click=\"addFilm\"><i class=\"fas fa-plus\"></i>\r\n                                Добавить фильм</button> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h3 class=\"card-title\">Список фильмов которые покажут скоро</h3>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                            <div class=\"film-card-wrap\">\r\n                                <FilmsUpcomList />\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </content>\r\n</template>\r\n\r\n<script>\r\nimport FilmsList from '../components/FilmsList.vue'\r\nimport FilmsUpcomList from '../components/FilmsUpcomList.vue'\r\nimport { collection, doc, getDocs, getDoc, setDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { db, storage } from '../firebase/init.js'\r\n\r\nexport default {\r\n    components: { FilmsList, FilmsUpcomList },\r\n    created() {\r\n        this.getFilms()\r\n    },\r\n    methods: {\r\n        addFilm() {\r\n            this.$store.state.films.currentList.push({\r\n                id: this.$store.state.films.currentList.length,\r\n                name: 'film-' + Date.now(),\r\n                uploaded: false,\r\n                data: [\r\n                    {\r\n                        title: '',\r\n                        desc: '',\r\n                        // trailer: '',\r\n                        // type: [],\r\n                        cover: {\r\n                            name: null,\r\n                            url: null\r\n                        },\r\n                        // gallery: [],\r\n                        // seo: {\r\n                        //     url: '',\r\n                        //     title: '',\r\n                        //     keywords: '',\r\n                        //     desc: ''\r\n                        // },\r\n                        toggle: null,\r\n                    }\r\n                ],\r\n                images: [\r\n                    {\r\n                        cover: {\r\n                            name: null,\r\n                            image: null,\r\n                            url: null,\r\n                            uploaded: false\r\n                        },\r\n                        gallery: [],\r\n                        deleted: []\r\n                    }\r\n                ]\r\n            })\r\n            this.$router.push({\r\n                name: 'filmsOne',\r\n                params: {\r\n                    id: this.$store.state.films.currentList.length - 1,\r\n                }\r\n            })\r\n        },\r\n        async getFilms() {\r\n            this.$store.state.films.currentList = [];\r\n            const filmsData = await getDocs(collection(db, 'films'))\r\n            filmsData.forEach((doc) => {\r\n                this.$store.state.films.currentList.push({\r\n                    id: this.$store.state.films.currentList.length,\r\n                    name: doc.id,\r\n                    uploaded: true,\r\n                    data: doc.data().data,\r\n                    images: [\r\n                        {\r\n                            cover: {\r\n                                name: doc.data().data[0].cover.name,\r\n                                image: null,\r\n                                url: doc.data().data[0].cover.url\r\n                            },\r\n                            gallery: [],\r\n                            deleted: []\r\n                        },\r\n                    ]\r\n                })\r\n            });\r\n        },\r\n    }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scouped>\r\n.card-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.film-card-wrap {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: flex-start;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n}\r\n\r\n.square {\r\n    width: 100px;\r\n    height: 100px;\r\n}\r\n\r\n.card-body {\r\n    position: relative;\r\n}</style>\r\n","<template>\r\n    <div class=\"banner\" v-for=\"(film, i) in currentList\" :key=\"i\" v-show=\"!film.data[0].toggle\">\r\n        <div class=\"card p-2 \">\r\n            <span class=\"badge bg-danger poa\" @click=\"this.$store.state.films.currentModal = !this.$store.state.films.currentModal\" v-if=\"currentList.length > 1\">X</span>\r\n            <router-link :to=\"`filmsOne/${film.id}`\" class=\"input-group\">\r\n                <img :src=\"film.images[0].cover.url\">\r\n                <p>Title:{{ film.data[0].title }}</p>\r\n            </router-link>\r\n        </div>\r\n        <div class=\"modal-wrap\" v-if=\"this.$store.state.films.currentModal\">\r\n            <div class=\"card p-2 modal-body\">\r\n                <h3>Действительно хотите удалить</h3>\r\n                <div class=\"actions\">\r\n                    <button class=\"btn btn-primary float-right\" @click=\"deleteFilm(film.id)\">Удалить</button>\r\n                    <button class=\"btn btn-primary float-right\" @click=\"this.$store.state.films.currentModal = !this.$store.state.films.currentModal\">Отменить</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { collection, doc, getDocs, getDoc, setDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { db, storage } from '../firebase/init.js'\r\n\r\nexport default {\r\n    components: {},\r\n    computed: {\r\n        currentList() {\r\n            return this.$store.state.films.currentList\r\n        }\r\n    },\r\n    data() {\r\n        return {}\r\n    },\r\n    methods: {\r\n        async deleteFilm(id) {\r\n            this.$store.state.films.currentModal = false;\r\n            this.loading = true;\r\n            if (this.$store.state.films.currentList[id].uploaded) {\r\n                // delete data\r\n                await deleteDoc(doc(db, \"films\", this.$store.state.films.currentList[id].name));\r\n                // delete images\r\n                for (let i = 0; i < this.$store.state.films.currentList[id].images.length; i++) {\r\n                    // delete main image\r\n                    if (this.$store.state.films.currentList[id].images[i].cover.name !== null) {\r\n                        const delRef = ref(storage, 'films/cover/' + this.$store.state.films.currentList[id].name);\r\n                        await deleteObject(delRef).catch((e) => {\r\n                            console.log(e);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            this.$store.state.films.currentList.splice(id, 1);\r\n            for (let i = 0; i < this.$store.state.films.currentList.length; i++) {\r\n                if (this.$store.state.films.currentList[i].id !== i) {\r\n                    this.$store.state.films.currentList[i].id = i;\r\n                }\r\n            }\r\n            this.loading = false;\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.banner {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n}\r\n\r\n.banner {\r\n    width: 240px;\r\n\r\n    img {\r\n        height: 140px;\r\n        object-fit: cover;\r\n    }\r\n}\r\n\r\n.input-group {\r\n    img {\r\n        width: 100%;\r\n        height: 140px;\r\n        object-fit: cover;\r\n    }\r\n}\r\n\r\n.card {\r\n    gap: 10px;\r\n}\r\n\r\n.poa {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: -10px;\r\n    top: -10px;\r\n}\r\n.modal-wrap{\r\n    position: absolute;\r\n    top: 0%;\r\n    left: 0%;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(112, 112, 112, 0.239);\r\n}\r\n.modal-body{\r\n    max-width: 400px;\r\n    max-height: 200px;\r\n    margin: auto auto;\r\n    top: 20%;\r\n    .actions{\r\n        display: flex;\r\n        justify-content: space-around;\r\n        button{\r\n            width: 40%;\r\n        }\r\n\r\n    }\r\n}\r\n\r\n</style>","import { render } from \"./FilmsList.vue?vue&type=template&id=abbccfea&scoped=true\"\nimport script from \"./FilmsList.vue?vue&type=script&lang=js\"\nexport * from \"./FilmsList.vue?vue&type=script&lang=js\"\n\nimport \"./FilmsList.vue?vue&type=style&index=0&id=abbccfea&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Dayman\\\\HTML_CSS_JScript\\\\5.0 -KinoCMS\\\\adminlte\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-abbccfea\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"banner\" v-for=\"(film, i) in currentList\" :key=\"i\" v-show=\"film.data[0].toggle\">\r\n        <div class=\"card p-2 \">\r\n            <span class=\"badge bg-danger poa\"\r\n                @click=\"this.$store.state.films.upcomModal = !this.$store.state.films.upcomModal\"\r\n                v-if=\"currentList.length > 1\">X</span>\r\n            <router-link :to=\"`filmsOne/${film.id}`\" class=\"input-group\">\r\n                <img :src=\"film.images[0].cover.url\">\r\n                <p>Title:{{ film.data[0].title }}</p>\r\n            </router-link>\r\n        </div>\r\n        <div class=\"modal-wrap\" v-if=\"this.$store.state.films.upcomModal\">\r\n            <div class=\"card p-2 modal-body\">\r\n                <h3>Действительно хотите удалить</h3>\r\n                <div class=\"actions\">\r\n                    <button class=\"btn btn-primary float-right\" @click=\"deleteFilm(film.id)\">Удалить</button>\r\n                    <button class=\"btn btn-primary float-right\"\r\n                        @click=\"this.$store.state.films.upcomModal = !this.$store.state.films.upcomModal\">Отменить</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { collection, doc, getDocs, getDoc, setDoc, deleteDoc } from \"firebase/firestore\";\r\nimport { db, storage } from '../firebase/init.js'\r\n\r\nexport default {\r\n    components: {},\r\n    computed: {\r\n        currentList() {\r\n            return this.$store.state.films.currentList\r\n        }\r\n    },\r\n    data() {\r\n        return {}\r\n    },\r\n    methods: {\r\n        async deleteFilm(id) {\r\n            this.$store.state.films.upcomModal = false;\r\n            this.loading = true;\r\n            if (this.$store.state.films.currentList[id].uploaded) {\r\n                // delete data\r\n                await deleteDoc(doc(db, \"films\", this.$store.state.films.currentList[id].name));\r\n                // delete images\r\n                for (let i = 0; i < this.$store.state.films.currentList[id].images.length; i++) {\r\n                    // delete main image\r\n                    if (this.$store.state.films.currentList[id].images[i].cover.name !== null) {\r\n                        const delRef = ref(storage, 'films/cover/' + this.$store.state.films.currentList[id].name);\r\n                        await deleteObject(delRef).catch((e) => {\r\n                            console.log(e);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            this.$store.state.films.currentList.splice(id, 1);\r\n            for (let i = 0; i < this.$store.state.films.currentList.length; i++) {\r\n                if (this.$store.state.films.currentList[i].id !== i) {\r\n                    this.$store.state.films.currentList[i].id = i;\r\n                }\r\n            }\r\n            this.loading = false;\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.banner {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n}\r\n\r\n.banner {\r\n    width: 240px;\r\n\r\n    img {\r\n        height: 140px;\r\n        object-fit: cover;\r\n    }\r\n}\r\n\r\n.input-group {\r\n    img {\r\n        width: 100%;\r\n        height: 140px;\r\n        object-fit: cover;\r\n    }\r\n}\r\n\r\n.card {\r\n    gap: 10px;\r\n}\r\n\r\n.poa {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    right: -10px;\r\n    top: -10px;\r\n}\r\n\r\n.modal-wrap {\r\n    position: absolute;\r\n    top: 0%;\r\n    left: 0%;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(112, 112, 112, 0.239);\r\n}\r\n\r\n.modal-body {\r\n    max-width: 400px;\r\n    max-height: 200px;\r\n    margin: auto auto;\r\n    top: 20%;\r\n\r\n    .actions {\r\n        display: flex;\r\n        justify-content: space-around;\r\n\r\n        button {\r\n            width: 40%;\r\n        }\r\n\r\n    }\r\n}</style>","import { render } from \"./FilmsUpcomList.vue?vue&type=template&id=0926370c&scoped=true\"\nimport script from \"./FilmsUpcomList.vue?vue&type=script&lang=js\"\nexport * from \"./FilmsUpcomList.vue?vue&type=script&lang=js\"\n\nimport \"./FilmsUpcomList.vue?vue&type=style&index=0&id=0926370c&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Dayman\\\\HTML_CSS_JScript\\\\5.0 -KinoCMS\\\\adminlte\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0926370c\"]])\n\nexport default __exports__","import { render } from \"./FilmsView.vue?vue&type=template&id=03fd2288\"\nimport script from \"./FilmsView.vue?vue&type=script&lang=js\"\nexport * from \"./FilmsView.vue?vue&type=script&lang=js\"\n\nimport \"./FilmsView.vue?vue&type=style&index=0&id=03fd2288&lang=scss&scouped=true\"\n\nimport exportComponent from \"D:\\\\Dayman\\\\HTML_CSS_JScript\\\\5.0 -KinoCMS\\\\adminlte\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_content_header","title","icon","_component_content","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","onClick","_cache","args","$options","addFilm","_hoisted_6","_hoisted_7","_hoisted_8","_component_FilmsList","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_component_FilmsUpcomList","_createElementBlock","_Fragment","_renderList","currentList","film","i","key","length","$event","$store","state","films","currentModal","this","_component_router_link","to","id","src","images","cover","url","_toDisplayString","data","deleteFilm","toggle","components","computed","methods","async","loading","uploaded","deleteDoc","doc","db","name","delRef","ref","storage","deleteObject","catch","e","console","log","splice","__exports__","upcomModal","FilmsList","FilmsUpcomList","created","getFilms","push","Date","now","desc","image","gallery","deleted","$router","params","filmsData","getDocs","collection","forEach","render"],"sourceRoot":""}